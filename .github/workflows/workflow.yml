name: Main workflow
on: [push]

jobs:
  scrape:
    runs-on: ubuntu-latest

    services:
      splash:
        image: scrapinghub/splash:3.5
        ports:
          - 8050:8050

    steps:
    - name: Checkout
      uses: actions/checkout@v2

    - name: Test splash
      run: curl 'http://localhost:8050/render.html?url=https://google.com'

    - name: Run the spider
      id: hello
      uses: ./
      with:
        spider-path: 'quotes_spider.py'
        spider-name: 'quotes'

    # Use the output from the `hello` step
    - name: Get the output time
      run: echo "The time was ${{ steps.hello.outputs.time }}"
